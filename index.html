<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>DogLike</title>
  <meta name="author" content="bigstupidx">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="DogLike"/>

  
    <meta property="og:image" content=""/>
  

  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  



</head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/">DogLike</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 <div class="page-header">
  <h1>好记性不如烂笔头</h1>
</div>

<div class="row page">

	
	<div class="col-md-9">
	

		<div class="slogan">
      <i class="fa fa-heart"></i>
      学无止境
</div>    
		<div id="top_search"></div>
		<div class="mypage">
		
		<!-- title and entry -->
		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2018-03-01 </div>
			<div class="article-title"><a href="/unityads添加/" >android工程添加unityads</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>unityads的官方文档：<br><a href="https://unityads.unity3d.com/help/index" target="_blank" rel="noopener">https://unityads.unity3d.com/help/index</a></p>
<p>unityads的官方github：<br><a href="https://github.com/Unity-Technologies/unity-ads-android" target="_blank" rel="noopener">https://github.com/Unity-Technologies/unity-ads-android</a></p>
<p>1、unityads.jar下载</p>
<ul>
<li>从其github的<a href="https://github.com/Unity-Technologies/unity-ads-android/releases" target="_blank" rel="noopener">release</a>中下载unity-ads.zip，解压之后里面应该有unity-ads.jar</li>
<li>百度网盘：链接:<a href="https://pan.baidu.com/s/1dAbx3S" target="_blank" rel="noopener">https://pan.baidu.com/s/1dAbx3S</a>  密码:d3dm</li>
</ul>
<p>2、将unityads.jar添加到android工程的libs下面</p>
<p>3、启动Activity的MainAcivity.java 中 添加</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> <span class="title">implements</span> <span class="title">IUnityAdsListener</span></span>&#123;</span><br><span class="line">	...</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4、实现IUnityAdsListener接口</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">onUnityAdsReady</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">      Log.w(<span class="string">"tag"</span>, <span class="string">"UnityAds onUnityAdsReady"</span> + s);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">onUnityAdsStart</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">      Log.w(<span class="string">"tag"</span>, <span class="string">"onUnityAdsStart"</span> + s);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">onUnityAdsFinish</span><span class="params">(String s, UnityAds.FinishState finishState)</span> </span>&#123;</span><br><span class="line">      Log.w(<span class="string">"tag"</span>, <span class="string">"UnityAds onUnityAdsFinish callback"</span>);</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">//此处为播放结束的回调方法，若不是unity项目，请调用自己的回调方法.</span></span><br><span class="line">          UnityPlayer.UnitySendMessage(<span class="string">"_Platform"</span>, <span class="string">"UnityAdsCallBack"</span>, s);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">onUnityAdsError</span><span class="params">(UnityAds.UnityAdsError unityAdsError, String s)</span> </span>&#123;</span><br><span class="line">      Log.w(<span class="string">"tag"</span>, <span class="string">"onUnityAdsError"</span> + unityAdsError + s);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>5、onCreate函数的最后添加</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">         API_LEVEL = Build.VERSION.SDK_INT;</span><br><span class="line">   &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">         e.printStackTrace();</span><br><span class="line">   &#125;</span><br><span class="line">Log.w(<span class="string">"tag"</span>, <span class="string">"==== UnityAds onCreate initialize111: "</span> + API_LEVEL);</span><br><span class="line"><span class="keyword">if</span> (API_LEVEL &gt;= <span class="number">9</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        UnityAds.initialize(<span class="keyword">this</span>, <span class="string">"idReplace"</span>, <span class="keyword">this</span>);</span><br><span class="line">        UnityAds.setListener(<span class="keyword">this</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>6、添加两个从unity中调用的方法：</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">ShowRewardVideoUnityAds</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Log.w(<span class="string">"tag"</span>, <span class="string">"show UnityAds video unity ads!"</span>);</span><br><span class="line">    MainActivity.<span class="keyword">this</span>.runOnUiThread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (UnityAds.isReady()) &#123;</span><br><span class="line">                    UnityAds.show(MainActivity.<span class="keyword">this</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">boolean</span> <span class="title">IsUnityAdsReady</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (API_LEVEL &lt; <span class="number">9</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="function"><span class="keyword">return</span> UnityAds.<span class="title">isReady</span><span class="params">()</span></span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>AndroidManifest.xml中添加：</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- unity ads --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:name</span>=<span class="string">"com.unity3d.ads.adunit.AdUnitActivity"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:configChanges</span>=<span class="string">"fontScale|keyboard|keyboardHidden|locale|mnc|mcc|navigation|orientation|screenLayout|screenSize|smallestScreenSize|uiMode|touchscreen"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:hardwareAccelerated</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:theme</span>=<span class="string">"@android:style/Theme.NoTitleBar.Fullscreen"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:name</span>=<span class="string">"com.unity3d.ads.adunit.AdUnitSoftwareActivity"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:configChanges</span>=<span class="string">"fontScale|keyboard|keyboardHidden|locale|mnc|mcc|navigation|orientation|screenLayout|screenSize|smallestScreenSize|uiMode|touchscreen"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:hardwareAccelerated</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:theme</span>=<span class="string">"@android:style/Theme.NoTitleBar.Fullscreen"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="unityads调用的基本流程"><a href="#unityads调用的基本流程" class="headerlink" title="unityads调用的基本流程"></a>unityads调用的基本流程</h5><ol>
<li>onCreate中初始化unityads，并且设置好unityads的回调监听IUnityAdsListener为MainActivity自己</li>
<li>显示视屏广告按钮的时候调用IsUnityAdsReady判断unityads已经准备好，没准备好可需要将按钮置灰等</li>
<li>调用ShowRewardVideoUnityAds播放视频广告</li>
<li>unityads播放完成后会调用之前注册的回调方法onUnityAdsFinish</li>
</ol>

	
	</div>
  <a type="button" href="/unityads添加/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2016-08-24 </div>
			<div class="article-title"><a href="/homebrew-update-bug/" >Homebrew 更新Bug</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>最新更新brew一直提示Already up-to-date，感觉不太对劲，到<a href="https://github.com/Homebrew/brew" target="_blank" rel="noopener">homebrew的github主页</a>上看了看，果然：</p>
<h4 id="Update-Bug"><a href="#Update-Bug" class="headerlink" title="Update Bug"></a>Update Bug</h4><p>If Homebrew was updated on Aug 10-11th 2016 and <code>brew update</code> always says <code>Already up-to-date.</code> you need to run:</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">cd</span> $(brew --repo); <span class="attribute">git</span> fetch; <span class="attribute">git</span> reset --hard origin/master; <span class="attribute">brew</span> update</span><br></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/homebrew-update-bug/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2016-01-23 </div>
			<div class="article-title"><a href="/python-bs4/" >【已解决】python多版本引发的 No moudle named xxx 问题</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>今天在sublime text2运行一个python脚本的时候出现了<strong><code>no module named bs4</code></strong>，bs4是python中beautifulsoup库的简写，按照bs4的安装命令</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip <span class="keyword">install</span> beautifulsoup4</span><br></pre></td></tr></table></figure>
<p>安装之后发现sublime下依然无法正确运行，<br>在iTerm终端的直接执行的python命令行中却可以<code>import bs4</code>的，推想可能安装了多个python版本<br>验证如下：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">➜  aws  python</span><br><span class="line">Python 2.7.11 (default, Dec  5 2015, 14:44:53)</span><br><span class="line">[GCC 4.2.1 Compatible Apple LLVM 7.0.0 (clang-700.1.76)] on darwin</span><br><span class="line">Type <span class="string">"help"</span>, <span class="string">"copyright"</span>, <span class="string">"credits"</span> <span class="keyword">or</span> <span class="string">"license"</span> <span class="keyword">for</span> more information.</span><br><span class="line">&gt;&gt;&gt; import bs4</span><br><span class="line">&gt;&gt;&gt; quit()</span><br><span class="line">➜  aws  ./spiderx.py</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"./spiderx.py"</span>, line 5, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">from</span> bs4 import BeautifulSoup</span><br><span class="line">ImportError: <span class="literal">No</span> module named bs4</span><br><span class="line">➜  aws  whereis python</span><br><span class="line">/usr/bin/python</span><br><span class="line">➜  aws  python</span><br><span class="line">Python 2.7.11 (default, Dec  5 2015, 14:44:53)</span><br><span class="line">[GCC 4.2.1 Compatible Apple LLVM 7.0.0 (clang-700.1.76)] on darwin</span><br><span class="line">Type <span class="string">"help"</span>, <span class="string">"copyright"</span>, <span class="string">"credits"</span> <span class="keyword">or</span> <span class="string">"license"</span> <span class="keyword">for</span> more information.</span><br><span class="line">&gt;&gt;&gt; quit()</span><br><span class="line">➜  aws  /usr/bin/python</span><br><span class="line">Python 2.7.10 (default, Oct 23 2015, 18:05:06)</span><br><span class="line">[GCC 4.2.1 Compatible Apple LLVM 7.0.0 (clang-700.0.59.5)] on darwin</span><br><span class="line">Type <span class="string">"help"</span>, <span class="string">"copyright"</span>, <span class="string">"credits"</span> <span class="keyword">or</span> <span class="string">"license"</span> <span class="keyword">for</span> more information.</span><br><span class="line">&gt;&gt;&gt; import bs4</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line 1, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">ImportError: <span class="literal">No</span> module named bs4</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>
<p>发现确实安装了两个版本的python，一个是2.7.10，一个是2.7.11，有一个应该是自带的，另外一个应该是通过brew安装的，在usr/local/bin/下面，而sublime中使用的应该是/usr/bin/python，因为在py文件的开头有</p>
<figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/python</span></span><br><span class="line">#-*- coding: UTF-<span class="number">8</span> -*-</span><br></pre></td></tr></table></figure>
<p>解决方法，删掉brew安装的版本(删除自带的版本貌似比较麻烦，而且都是2.7就没有必要了)<br><code>brew uninstall python</code><br>再运行python的时候进入的是2.7.10，表示2.7.11已经删除</p>
<p>如此可以再安装bs4，使用如下命令：<br><code>sudo pip install beautifulsoup4</code><br>提示pip command not found，汗。。</p>
<p>使用<code>brew install pip</code>命令，达到如下结果</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">➜  ~  brew <span class="keyword">install</span> pip</span><br><span class="line"><span class="keyword">Error</span>: <span class="keyword">No</span> available formula <span class="keyword">with</span> the <span class="keyword">name</span> <span class="string">"pip"</span></span><br><span class="line">Homebrew provides pip via: <span class="string">`brew install python`</span>. However you will <span class="keyword">then</span></span><br><span class="line">have two Pythons installed <span class="keyword">on</span> your Mac, so alternatively you can <span class="keyword">install</span></span><br><span class="line">pip via the instructions <span class="keyword">at</span>:</span><br><span class="line"></span><br><span class="line">  https://pip.readthedocs.org/en/stable/installing/#<span class="keyword">install</span>-pip</span><br><span class="line">➜  ~</span><br></pre></td></tr></table></figure>
<p>直接进入那个地址看看，<a href="https://pip.readthedocs.org/en/stable/installing/#install-pip" target="_blank" rel="noopener">https://pip.readthedocs.org/en/stable/installing/#install-pip</a></p>
<p>按照步骤安装pip即可<br>中间遇到了权限问题，加上sudo就可以了</p>

	
	</div>
  <a type="button" href="/python-bs4/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2016-01-04 </div>
			<div class="article-title"><a href="/rebar-erlang/" >rebar搭建erlang项目</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>rebar在github上源码：<a href="https://github.com/basho/rebar" target="_blank" rel="noopener">https://github.com/basho/rebar</a><br>wiki界面是：<a href="https://github.com/rebar/rebar/wiki" target="_blank" rel="noopener">https://github.com/rebar/rebar/wiki</a></p>
<h4 id="源码编译"><a href="#源码编译" class="headerlink" title="源码编译"></a>源码编译</h4><p>在其<a href="https://github.com/basho/rebar/blob/develop/README.md" target="_blank" rel="noopener">README.md</a>中已经写好了</p>
<blockquote>
<p><strong>Downloading</strong></p>
<p>You can download a pre-built binary version of rebar from:</p>
<p><a href="https://github.com/rebar/rebar/wiki/rebar" target="_blank" rel="noopener">https://github.com/rebar/rebar/wiki/rebar</a></p>
<p><strong>Building rebar</strong></p>
<p>$ git clone git://github.com/rebar/rebar.git<br>$ cd rebar<br>$ ./bootstrap<br>Recompile: src/getopt<br>…<br>Recompile: src/rebar_utils<br>==&gt; rebar (compile)<br>Congratulations! You now have a self-contained script called “rebar” in<br>your current working directory. Place this script anywhere in your path<br>and you can use rebar to build OTP-compliant apps.</p>
</blockquote>
<p>编译完成之后会生成一个叫<code>rebar</code>的没有任何后缀的文件，可以将这个文件作为常用命令放到<code>/usr/bin/</code>下面</p>
<p>利用rebar创建并运行erlang项目的文档在此：<a href="https://github.com/rebar/rebar/wiki/Release-handling" target="_blank" rel="noopener">https://github.com/rebar/rebar/wiki/Release-handling</a></p>
<p>其中用到的rebar的常用命令解释如下：</p>
<ol>
<li><code>rebar -V</code> 查看当前rebar的版本</li>
<li><code>rebar create-app appid=XXX</code> 生成名为XXX的app，会在同级目录下生成src文件夹</li>
<li><code>rebar get-deps</code> 会根据rebar.config中得deps下载获取deps，这个类似于maven的dom文件</li>
<li><code>rebar compile</code> 编译</li>
<li><code>rebar create-node nodeid=XXX</code> 创建节点</li>
<li><code>rebar generate</code> 生成</li>
</ol>
<p><code>rel/files/vm.args</code>中的一些配置：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Name of the node，节点名字，运行node()函数显示的是这个</span></span></span><br><span class="line">-name xx@192.168.0.79</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Cookie for distributed erlang，这个比较重要</span></span></span><br><span class="line">-setcookie poolmaster</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Heartbeat management; auto-restarts VM if it dies or becomes unresponsive</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># (Disabled by default..use with caution!)</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#-heart</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Enable kernel poll and a few async threads</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># epoll是否启用，线上服务器最好启用</span></span></span><br><span class="line">+K true</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Increase number of concurrent ports/sockets</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 更改最大线程数，线上服务器最好做一下更改</span></span></span><br><span class="line">-env ERL_MAX_PORTS 999999</span><br><span class="line">+P 1000000</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 启用多核，线上服务器最好启用</span></span></span><br><span class="line">-smp enable</span><br><span class="line">+A 4</span><br><span class="line">-kernel inet_dist_listen_min 9000</span><br><span class="line">-kernel inet_dist_listen_max 9999</span><br></pre></td></tr></table></figure>
<p><code>rel/XXX/bin/XXX start</code>和<code>rel/XXX/bin/XXX console</code> 都是启动这个XXX节点，不能同时使用，有个同事使用start之后再使用console出错，<code>Protocol: ~tp: the name myapp@192.168.2.140 seems to be in use by another Erlang node&quot;,[&quot;inet_tcp&quot;]}</code> 问我是不是代码写错了。我一般是使用<code>XXX start</code>之后，使用<code>XXX remote_console</code>来连上XXX节点，因为线上服务器使用attach会看到很多很多log，而remote_console是一个干净的环境（看不到log）</p>
<p>vm的设置参考：<br><a href="http://itindex.net/detail/43819-%E6%9C%8D%E5%8A%A1%E5%99%A8-%E7%AC%94%E8%AE%B0-erlang" target="_blank" rel="noopener">100万并发连接服务器笔记之Erlang完成1M并发连接目标</a></p>

	
	</div>
  <a type="button" href="/rebar-erlang/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2015-12-29 </div>
			<div class="article-title"><a href="/erlang-call-last/" >关于erlang尾递归</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>在查找erlang性能优化方面文章的时候看到这篇文章<a href="http://erlangdisplay.iteye.com/blog/1214167" target="_blank" rel="noopener">Erlang服务器内存耗尽bug跟踪过程</a>，提到尾递归，作者在最后给出了验证程序，我稍作调整如下：</p>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">-module</span><span class="params">(test)</span>.</span><br><span class="line"><span class="keyword">-compile</span><span class="params">([export_all])</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">t1</span><span class="params">()</span> -&gt;</span></span><br><span class="line">  Pid = spawn(<span class="keyword">fun</span>() -&gt; do_t1() <span class="keyword">end</span>),</span><br><span class="line">  send_msg(Pid, <span class="number">100000</span>).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">t2</span><span class="params">()</span> -&gt;</span></span><br><span class="line">  Pid = spawn(<span class="keyword">fun</span>() -&gt; do_t2() <span class="keyword">end</span>),</span><br><span class="line">  send_msg(Pid, <span class="number">100000</span>).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">send_msg</span><span class="params">(_Pid, <span class="number">0</span>)</span> -&gt;</span></span><br><span class="line">  ok;</span><br><span class="line"><span class="function"><span class="title">send_msg</span><span class="params">(Pid, N)</span> -&gt;</span></span><br><span class="line">  Pid ! &lt;&lt;<span class="number">2</span>:(N)&gt;&gt;,</span><br><span class="line">  timer:sleep(<span class="number">200</span>),</span><br><span class="line">  send_msg(Pid, N - <span class="number">1</span>).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">do_t1</span><span class="params">()</span> -&gt;</span></span><br><span class="line">  erlang:garbage_collect(self()),</span><br><span class="line">  Result = erlang:process_info(self(), [memory, garbage_collection]),</span><br><span class="line">  io:format(<span class="string">"~w ~n"</span>, [Result]),</span><br><span class="line">  io:format(<span class="string">"stack_size:~w~n~n"</span>, [erlang:process_info(self(), stack_size)]),</span><br><span class="line">  <span class="keyword">try</span></span><br><span class="line">    <span class="keyword">receive</span></span><br><span class="line">      _ -&gt;</span><br><span class="line">        do_t1()<span class="comment">%%第一处</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">catch</span></span><br><span class="line">    _:_ -&gt;</span><br><span class="line">      do_t1()<span class="comment">%%第二处</span></span><br><span class="line">  <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">do_t2</span><span class="params">()</span> -&gt;</span></span><br><span class="line">  erlang:garbage_collect(self()),</span><br><span class="line">  Result = erlang:process_info(self(), [memory, garbage_collection]),</span><br><span class="line">  io:format(<span class="string">"~w ~n"</span>, [Result]),</span><br><span class="line">  io:format(<span class="string">"stack_size:~w~n~n"</span>, [erlang:process_info(self(),stack_size)]),</span><br><span class="line">  <span class="keyword">receive</span></span><br><span class="line">    _ -&gt;</span><br><span class="line">      do_t2()</span><br><span class="line">  <span class="keyword">end</span>.</span><br></pre></td></tr></table></figure>
<p>执行<code>erlc test.erl &amp;&amp; erl -eval &quot;test:t1()&quot;</code>得到如下结果：</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[&#123;memory,<span class="number">2680</span>&#125;,&#123;garbage_collection,[&#123;min_bin_vheap_size,<span class="number">46422</span>&#125;,&#123;min_heap_size,<span class="number">233</span>&#125;,&#123;fullsweep_after,<span class="number">65535</span>&#125;,&#123;minor_gcs,<span class="number">0</span>&#125;]&#125;]</span><br><span class="line">stack_size:&#123;stack_size,<span class="number">12</span>&#125;</span><br><span class="line"></span><br><span class="line">[&#123;memory,<span class="number">2680</span>&#125;,&#123;garbage_collection,[&#123;min_bin_vheap_size,<span class="number">46422</span>&#125;,&#123;min_heap_size,<span class="number">233</span>&#125;,&#123;fullsweep_after,<span class="number">65535</span>&#125;,&#123;minor_gcs,<span class="number">0</span>&#125;]&#125;]</span><br><span class="line">stack_size:&#123;stack_size,<span class="number">14</span>&#125;</span><br><span class="line"></span><br><span class="line">[&#123;memory,<span class="number">2680</span>&#125;,&#123;garbage_collection,[&#123;min_bin_vheap_size,<span class="number">46422</span>&#125;,&#123;min_heap_size,<span class="number">233</span>&#125;,&#123;fullsweep_after,<span class="number">65535</span>&#125;,&#123;minor_gcs,<span class="number">0</span>&#125;]&#125;]</span><br><span class="line">stack_size:&#123;stack_size,<span class="number">16</span>&#125;</span><br></pre></td></tr></table></figure>
<p>执行<code>erlc test.erl &amp;&amp; erl -eval &quot;test:t2()&quot;</code>得到如下结果：</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[&#123;memory,<span class="number">2680</span>&#125;,&#123;garbage_collection,[&#123;min_bin_vheap_size,<span class="number">46422</span>&#125;,&#123;min_heap_size,<span class="number">233</span>&#125;,&#123;fullsweep_after,<span class="number">65535</span>&#125;,&#123;minor_gcs,<span class="number">0</span>&#125;]&#125;]</span><br><span class="line">stack_size:&#123;stack_size,<span class="number">1</span>&#125;</span><br><span class="line"></span><br><span class="line">[&#123;memory,<span class="number">2680</span>&#125;,&#123;garbage_collection,[&#123;min_bin_vheap_size,<span class="number">46422</span>&#125;,&#123;min_heap_size,<span class="number">233</span>&#125;,&#123;fullsweep_after,<span class="number">65535</span>&#125;,&#123;minor_gcs,<span class="number">0</span>&#125;]&#125;]</span><br><span class="line">stack_size:&#123;stack_size,<span class="number">1</span>&#125;</span><br><span class="line"></span><br><span class="line">[&#123;memory,<span class="number">2680</span>&#125;,&#123;garbage_collection,[&#123;min_bin_vheap_size,<span class="number">46422</span>&#125;,&#123;min_heap_size,<span class="number">233</span>&#125;,&#123;fullsweep_after,<span class="number">65535</span>&#125;,&#123;minor_gcs,<span class="number">0</span>&#125;]&#125;]</span><br><span class="line">stack_size:&#123;stack_size,<span class="number">1</span>&#125;</span><br></pre></td></tr></table></figure>
<p>可以看出stack_size在不停增长，确实不是尾递归方式，我们程序没有出错，应该没有进入到catch得block中，故而try catch中的do_t1才是造成非尾递归的原因。<br>评论中@chaoslawful提出了合理的解释，并提到了一种字节码的方式，使用命令<br><code>erlc +&quot;&#39;S&#39;&quot; test.erl</code> 可以清晰看出在do_t1的字节码中可以看到</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"> <span class="number">97</span>     &#123;'try',&#123;y,<span class="number">0</span>&#125;,&#123;f,<span class="number">13</span>&#125;&#125;.</span><br><span class="line"> <span class="number">98</span>     &#123;line,[&#123;location,<span class="string">"test.erl"</span>,<span class="number">26</span>&#125;]&#125;.</span><br><span class="line"> <span class="number">99</span>   &#123;label,<span class="number">10</span>&#125;.</span><br><span class="line"><span class="number">100</span>     &#123;loop_rec,&#123;f,<span class="number">11</span>&#125;,&#123;x,<span class="number">0</span>&#125;&#125;.</span><br><span class="line"><span class="number">101</span>     remove_message.</span><br><span class="line"><span class="number">102</span>     &#123;line,[&#123;location,<span class="string">"test.erl"</span>,<span class="number">28</span>&#125;]&#125;.</span><br><span class="line"><span class="number">103</span>     &#123;call,<span class="number">0</span>,&#123;f,<span class="number">9</span>&#125;&#125;.</span><br><span class="line"><span class="number">104</span>     &#123;jump,&#123;f,<span class="number">12</span>&#125;&#125;.</span><br><span class="line"><span class="number">105</span>   &#123;label,<span class="number">11</span>&#125;.</span><br><span class="line"><span class="number">106</span>     &#123;wait,&#123;f,<span class="number">10</span>&#125;&#125;.</span><br><span class="line"><span class="number">107</span>   &#123;label,<span class="number">12</span>&#125;.</span><br><span class="line"><span class="number">108</span>     &#123;try_end,&#123;y,<span class="number">0</span>&#125;&#125;.</span><br><span class="line"><span class="number">109</span>     &#123;deallocate,<span class="number">1</span>&#125;.</span><br><span class="line"><span class="number">110</span>     return.</span><br><span class="line"><span class="number">111</span>   &#123;label,<span class="number">13</span>&#125;.</span><br><span class="line"><span class="number">112</span>     &#123;try_case,&#123;y,<span class="number">0</span>&#125;&#125;.</span><br><span class="line"><span class="number">113</span>     &#123;call_last,<span class="number">0</span>,&#123;f,<span class="number">9</span>&#125;,<span class="number">1</span>&#125;.</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>在try开始之后有call，而在try_case后面使用的是call_last<br>而在do_t2的字节码中没有找到call，只有call_last</p>
<h4 id="关于erlang字节码"><a href="#关于erlang字节码" class="headerlink" title="关于erlang字节码"></a>关于erlang字节码</h4><p>有两种生成方式，生成的结果也不太一样</p>
<ol>
<li>从源码生成抽象码. erlc +”‘S’” mod.erl, 生成mod.S</li>
<li>从beam生成Opcode. 未公开的功能. erts_debug:df 参数M或者 M, F, 生成mod.dis</li>
</ol>
<p>第一种前面已经给出了<code>erlc +&quot;&#39;S&#39;&quot; test.erl</code><br>第二种进入erl控制台之后，如下命令，可生成test.dis文件，打开看是类似汇编代码的东西，看着头疼。。。</p>
<figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;Erlang/OTP <span class="number">17</span> [erts-<span class="number">6.4</span>] [source] [<span class="number">64</span>-bit] [smp:<span class="number">8</span>:<span class="number">8</span>] [async-threads:<span class="number">10</span>] [hipe] [kernel-poll:false] [dtrace]</span><br><span class="line"></span><br><span class="line">Eshell V6.<span class="number">4</span>  (abort with ^G)</span><br><span class="line"><span class="meta">1&gt; </span>erts_debug:df(test).</span><br><span class="line">ok</span><br></pre></td></tr></table></figure>
<p>参考：<br><a href="http://erlangdisplay.iteye.com/blog/1214167" target="_blank" rel="noopener">http://erlangdisplay.iteye.com/blog/1214167</a><br><a href="http://www.cnblogs.com/bozhang/articles/3115220.html" target="_blank" rel="noopener">http://www.cnblogs.com/bozhang/articles/3115220.html</a><br><a href="http://blog.yufeng.info/archives/498" target="_blank" rel="noopener">http://blog.yufeng.info/archives/498</a><br><a href="http://www.erlang.org/doc/man/erlang.html#process_info-1" target="_blank" rel="noopener">http://www.erlang.org/doc/man/erlang.html#process_info-1</a></p>

	
	</div>
  <a type="button" href="/erlang-call-last/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2015-12-24 </div>
			<div class="article-title"><a href="/encode-decode/" >关于加密解密的一些事</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>看到一个<a href="http://www.iroowe.com/about/" target="_blank" rel="noopener">blog</a>在关于我得联系方式中写得是：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo <span class="attribute">YmVzdGx1b2xpd2VAZ21haWwuY29tCg</span>== | openssl base64 -d</span><br></pre></td></tr></table></figure>
<p>看起来很高大上的样子!!!<br>其实是利用base64的加密算法隐藏了自己的邮箱，先加密得到一个字符串<br>终端执行如下：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">➜  ~  echo bestluoliwe@gmail.com | openssl base64</span><br><span class="line"><span class="attribute">YmVzdGx1b2xpd2VAZ21haWwuY29tCg</span>==</span><br><span class="line">➜  ~  echo <span class="attribute">YmVzdGx1b2xpd2VAZ21haWwuY29tCg</span>== | openssl base64 -d</span><br><span class="line">bestluoliwe@gmail.com</span><br><span class="line">➜  ~</span><br></pre></td></tr></table></figure>
<p>也可以使用其他加密方式，比如<code>aes-128-cbc</code>, <code>des3</code></p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">➜  openssl <span class="keyword">enc</span> -aes-128-cbc -<span class="keyword">in</span> a.<span class="keyword">log</span> -<span class="keyword">out</span> b.<span class="built_in">log</span></span><br><span class="line">enter aes-128-cbc encryption password:</span><br><span class="line">Verifying - enter aes-128-cbc encryption password:</span><br><span class="line">➜  openssl <span class="keyword">enc</span> -<span class="keyword">d</span> -aes-128-cbc -<span class="keyword">in</span> b.<span class="keyword">log</span> -<span class="keyword">out</span> c.<span class="built_in">log</span></span><br><span class="line">enter aes-128-cbc decryption password:</span><br><span class="line">➜  tail c.<span class="built_in">log</span></span><br><span class="line">king</span><br><span class="line">➜  tail a.<span class="built_in">log</span></span><br><span class="line">king</span><br><span class="line">➜  tail b.<span class="built_in">log</span></span><br><span class="line">Salted__��!����6L0��V��<span class="keyword">L</span>/�rD%                                                                                                     ➜</span><br></pre></td></tr></table></figure>
<p>这个地方加密出来的字符</p>
<p>看别人blog的时候经常看到md5这个词眼，我记得md5不属于加密解密的范围，但是百度md5的时候出现了很多md5解密网站，再深究一下这些网站应该是暴力匹配的破解方法，就是讲很多密码组合的md5求出来，当用户输入md5码的时候反向查找的方法，可以看看知乎上的回答<a href="https://www.zhihu.com/question/22651987" target="_blank" rel="noopener">为什么说 MD5 是不可逆的？</a></p>
<p>md5只是提取特征码，理论上不同文件的md5相同概率极小，所以用来做文件校验，给文件的同时给出md5码，防止被篡改，同样的还有sum、cksum、md5sum、sha1sum等等</p>
<p>下面是来自<a href="http://blog.sina.com.cn/s/blog_702c2db50100pjn7.html" target="_blank" rel="noopener">夜莺的博客</a></p>
<ol>
<li><p>base64编码/解码<br>谈到命令行下怎样发送邮件附件，很多人想起了uuencode。也能够使用base64编码。以下是openssl base64编码/解码的使用：<br>$ openssl base64   filename.txt<br>$ openssl base64 -d   filename.bin</p>
</li>
<li><p>校验文档的一致性<br>UNIX下校验文档一致性的方法很多，比如sum、cksum、md5sum、sha1sum等。sum和cksum适用于简单校验的场合，生成的校验码 容易重复。md5sum有安全漏洞，当前比较推荐的是sha1sum。但是sha1sum在不同的平台用法有些不同。考虑到跨平台性，建议用 openssl。<br>$ openssl sha1 filename<br>SHA1(filename)= e83a42b9bc8431a6645099be50b6341a35d3dceb<br>$ openssl md5 filename<br>MD5(filename)= 26e9855f8ad6a5906fea121283c729c4</p>
</li>
<li><p>文档加密/解密<br>OpenSSL支持很多加密算法，但是一些算法只是为了保持向后兼容性，现在已不推荐使用，比如DES和RC4-40。推荐使用的加密算法是 bf(Blowfish)和-aes-128-cbc(运行在CBC模式的128位密匙AES加密算法)，加密强度有保障。<br>加密示例：<br>$ openssl enc -aes-128-cbc   filename.aes-128-cbc<br>enter aes-128-cbc encryption password:<br>Verifying - enter aes-128-cbc encryption password:<br>解密示例：<br>$ openssl enc -d -aes-128-cbc -in filename.aes-128-cbc &gt; filename<br>enter aes-128-cbc decryption password:</p>
</li>
<li><p>口令生成和传递<br>openssl能够生成随机性很强的口令。<br>$ openssl rand 15 -base64<br>s69mj+8ToN2p3Z1KESBG<br>以上命令需要openssl生成15个字节序列，然后用base64编码，结果产生20个字符。<br>在日常生活中，经常可看到这样的情况：系统管理员配置初始密码给用户，然后让用户登录去修改新密码，这给安全带来了隐患。较好的做法是用户生成口令加密后 的结果发给管理员，让管理员配置到系统中。<br>比如对于以上生成的口令，UNIX口令加密方法如下：<br>$ openssl passwd -1 s69mj+8ToN2p3Z1KESBG<br>$1$Rp/btEwK$qhUGFlsIpDtNT1I9MD/Gg1<br>管理员收集每个用户交给他的加密后的串，写到一个文档中，比如文档名为newpassword：<br>user_a:$1$Rp/btEwK$qhUGFlsIpDtNT1I9MD/Gg1<br>user_b:$1$zmUy5lry$aG45DkcaJwM/GNlpBLTDy0<br>…<br>一个用户一行，用户名和密码之间用冒号分隔。<br>系统管理员运行如下命令导入用户密码：<br>$ chpasswd –encrypted<br>对于老UNIX系统，生成口令密码无需参数-1，比如：<br>$ openssl passwd s69mj+8ToN2p3Z1KESBG<br>Warning: truncating password to 8 characters<br>FS4lGulQ915WU<br>假如passwd命令后没有接口令，openssl会提示输入一个：<br>$ openssl passwd -1<br>Password:<br>Verifying - Password:<br>$1$jACBc0.C$KR5DcpttXQoKfDiapyvav0</p>
</li>
</ol>

	
	</div>
  <a type="button" href="/encode-decode/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2015-12-23 </div>
			<div class="article-title"><a href="/C-Meanings/" >C中#和##的意义</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>看一些源码中经常出现#define中带有#或者##，查过很多次，每次都记不住。。</p>
<p>首先define是在预编译的时候做代码替换的<br><strong>1. 单个#表示字符串化，e.g. <code>#A</code>就相当于JAVA中的<code>(&quot;&quot;+A)</code>的意思</strong><br><strong>2. 双个##表示连接，e.g. <code>A##bc</code>替换之后相当于<code>Abc</code></strong></p>
<p>运行下下面代码就清晰了：<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> OUTPUT(A) cout&lt;&lt;#A&lt;&lt;<span class="meta-string">":"</span>&lt;&lt;(A)&lt;&lt;endl;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CHAR(A) st##A</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FUNC_NAME(A, B) fun##A(B)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> funName(<span class="keyword">string</span> name) &#123; <span class="literal">OUTPUT</span>(name); &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> funAge(<span class="keyword">int</span> age) &#123; <span class="literal">OUTPUT</span>(age); &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> main() &#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">1</span>, b = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">string</span> str = <span class="string">"name"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="literal">OUTPUT</span>(a);</span><br><span class="line">    <span class="literal">OUTPUT</span>(b);</span><br><span class="line">    <span class="literal">OUTPUT</span>(a + b);</span><br><span class="line">    <span class="literal">OUTPUT</span>(str);</span><br><span class="line"></span><br><span class="line">    <span class="literal">OUTPUT</span>(CHAR(r));</span><br><span class="line">    <span class="comment">//cout&lt;&lt;#CHAR(r)&lt;&lt;":"&lt;&lt;(CHAR(r))&lt;&lt;endl</span></span><br><span class="line">    <span class="comment">//cout&lt;&lt;#CHAR(r)&lt;&lt;":"&lt;&lt;(str)&lt;&lt;endl</span></span><br><span class="line">    cout &lt;&lt; <span class="string">"CHAR(r)"</span> &lt;&lt; <span class="string">":"</span> &lt;&lt; (str) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    FUNC_NAME(Name, <span class="string">"king"</span>);</span><br><span class="line">    FUNC_NAME(Age, <span class="number">12</span>);</span><br><span class="line">    <span class="built_in">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>运行结果是：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span>:<span class="number">1</span></span><br><span class="line"><span class="selector-tag">b</span>:<span class="number">2</span></span><br><span class="line"><span class="selector-tag">a</span> + <span class="selector-tag">b</span>:<span class="number">3</span></span><br><span class="line">str:name</span><br><span class="line"><span class="function"><span class="title">CHAR</span><span class="params">(r)</span></span>:name</span><br><span class="line"><span class="function"><span class="title">CHAR</span><span class="params">(r)</span></span>:name</span><br><span class="line">name:king</span><br><span class="line">age:<span class="number">12</span></span><br></pre></td></tr></table></figure></p>

	
	</div>
  <a type="button" href="/C-Meanings/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2015-12-22 </div>
			<div class="article-title"><a href="/linux-free-command/" >Linux free 命令</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>linux中的free命令可以查看内存使用情况，带参数<code>-m</code>表示按照Mb为单位输出，也可以带其他参数</p>
<figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fruits@100:~$ free -m</span><br><span class="line">             total       used       free     shared    buffers     cached</span><br><span class="line">Mem:        <span class="number"> 16002 </span>    <span class="number"> 15476 </span>      <span class="number"> 526 </span>        <span class="number"> 0 </span>      <span class="number"> 410 </span>      5257</span><br><span class="line">-/+ buffers/cache:      <span class="number"> 9808 </span>      6194</span><br><span class="line">Swap:       <span class="number"> 16336 </span>    <span class="number"> 15005 </span>      1331</span><br><span class="line">fruits@100:~$</span><br></pre></td></tr></table></figure>
<h3 id="第二行："><a href="#第二行：" class="headerlink" title="第二行："></a>第二行：</h3><ol>
<li>total <code>16002</code>：总内存大小，可以认为就是机器的内存条大小</li>
<li>used <code>15476</code>：系统内核认为已使用的内存，是系统认为的占用内存，其实有些可以不算</li>
<li>free <code>526</code>：系统内核认为的空闲内存，完全空闲</li>
<li>shared 据说已弃用</li>
<li>buffers/cached <code>410/5257</code>：缓存</li>
</ol>
<p><strong>从内核角度看内存: total = userd + free</strong></p>
<h3 id="第三行："><a href="#第三行：" class="headerlink" title="第三行："></a>第三行：</h3><ol>
<li><strong>used <code>9808</code>：</strong>从应用角度看是已分配的内存（不可能再分配给我了），等于第二行中的<strong>used - buffers - cached</strong></li>
<li><strong>free <code>6194</code>：</strong>从应用角度看是还可能给我的总内存，等于第二行中得<strong>free + buffers + cached</strong></li>
</ol>
<p><strong>从应用角度看内存：系统占用了9808M内存，能给我的内存是6194M</strong></p>
<p>参考：</p>
<ol>
<li><a href="http://itlab.idcquan.com/linux/set/935456.html" target="_blank" rel="noopener">http://itlab.idcquan.com/linux/set/935456.html</a></li>
<li><a href="http://www.cnblogs.com/coldplayerest/archive/2010/02/20/1669949.html" target="_blank" rel="noopener">http://www.cnblogs.com/coldplayerest/archive/2010/02/20/1669949.html</a></li>
</ol>

	
	</div>
  <a type="button" href="/linux-free-command/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2015-11-15 </div>
			<div class="article-title"><a href="/mac-homebrew-安装erlang特定版本/" >mac homebrew 安装erlang特定版本</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>当前最新版是<code>R18</code>，但最新版有些代码和现在服务器代码不太兼容，需要使用<code>R17</code></p>
<ul>
<li>如果直接使用<code>brew install erlang</code>则直接安装的是最新版</li>
<li>使用<code>brew install erl</code>再选择version的方法<br><code>brew install homebrew/versions/erlang-r17</code><br>好像erlang的官网被墙，最后最是在下载man这一步死掉</li>
</ul>
<p>后面有尝试下载源代码的方式</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wget http://www.erlang.org/download/otp_src_17.5.tar.gz</span><br><span class="line">tar -zxvf otp_src_17.5.tar.gz</span><br><span class="line">cd otp_src_17.5</span><br><span class="line">sudo ./configure  --prefix=/opt/erlang</span><br><span class="line">sudo make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>
<p>但在执行config的时候出现下面情况</p>
<blockquote>
<hr>
<p><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong>  APPLICATIONS DISABLED  <strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></p>
<hr>
<p>crypto         : No usable OpenSSL found<br>ssh            : No usable OpenSSL found<br>ssl            : No usable OpenSSL found</p>
<hr>
</blockquote>
<p>即表示openssl没有安装，但是自己调用openssl是ok的。。</p>
<p>找来找去<br>最后在<a href="https://github.com/elixir-lang/elixir/issues/1748" target="_blank" rel="noopener">github上的一个帖子</a><br>的最后找到openssl的问题，使用如下命令：</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install -vd --<span class="keyword">with</span>-ssl=<span class="regexp">/usr/bin</span><span class="regexp">/openssl homebrew/versions</span><span class="regexp">/erlang-r17</span></span><br></pre></td></tr></table></figure>
<p>中途也会卡在man和html的地方，我直接选择ignore的方式，最后居然成功了，。。。</p>
<hr>
<p>以上是MAC下安装经历的问题，如果是在ubuntu下面，遇到类似的bug，下面这个链接可能有所帮助<br><a href="https://sites.google.com/site/comptekkia/erlang/how-to-install-erlang-on-ubuntu-10-10" target="_blank" rel="noopener">How to Install Erlang on Ubuntu 10.10</a></p>

	
	</div>
  <a type="button" href="/mac-homebrew-安装erlang特定版本/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2015-11-10 </div>
			<div class="article-title"><a href="/Eclipse-ADT-安装/" >Eclipse ADT ZIP包离线安装</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		<p>官网的做法如下：<br><a href="http://developer.android.com/sdk/installing/installing-adt.html" target="_blank" rel="noopener">http://developer.android.com/sdk/installing/installing-adt.html</a></p>
<ol>
<li><p>Download the ADT Plugin zip file (do not unpack it):</p>
</li>
<li><p>Start Eclipse, then select <strong>Help</strong> &gt; <strong>Install New Software</strong>.</p>
</li>
<li>Click <strong>Add</strong>, in the top-right corner.</li>
<li>In the Add Repository dialog, click <strong>Archive</strong>.</li>
<li>Select the downloaded ADT-23.0.6.zip file and click OK.</li>
<li>Enter “ADT Plugin” for the name and click OK.</li>
<li>In the Available Software dialog, select the checkbox next to Developer Tools and click Next.</li>
<li>In the next window, you’ll see a list of the tools to be downloaded. Click Next.</li>
<li>Read and accept the license agreements, then click Finish.<br>If you get a security warning saying that the authenticity or validity of the software can’t be established, click OK.</li>
<li>When the installation completes, restart Eclipse.</li>
</ol>

	
	</div>
  <a type="button" href="/Eclipse-ADT-安装/#more" class="btn btn-default more">阅读此文</a>
</div>

		

		</div>

		<!-- pagination -->
		<div>
  		<center>
		<div class="pagination">
<ul class="pagination">
	 
		
          <li class="prev disabled"><a><i class="fa fa-arrow-circle-o-left"></i>上一页</a></li>
        

        <li><a href="/"><i class="fa fa-home"></i>Home</a></li>

		
		   <li class="next"> <a href="/page/2/" class="alignright next">下一页<i class="fa fa-arrow-circle-o-right"></i></a> </li>          
        
	
</ul>
</div>

  		</center>
		</div>

		
		
	</div> <!-- col-md-9 -->

	
		<div class="col-md-3">
	<div id="sidebar">
	
			
  <div id="site_search">
   <div class="form-group">
    <input type="text" id="local-search-input" name="q" results="0" placeholder="搜索" class="st-search-input st-default-search-input form-control"/>
   </div>  
  <div id="local-search-result"></div>
  </div>


		
			
	<div class="widget">
		<h4>分类</h4>
		<ul class="tag_box inline list-unstyled">
		
			<li><a href="/categories/DOODLE/">DOODLE<span>1</span></a></li>
		
			<li><a href="/categories/Mac/">Mac<span>1</span></a></li>
		
			<li><a href="/categories/POJ/">POJ<span>2</span></a></li>
		
			<li><a href="/categories/bug/">bug<span>1</span></a></li>
		
			<li><a href="/categories/c/">c++<span>1</span></a></li>
		
			<li><a href="/categories/erlang/">erlang<span>2</span></a></li>
		
			<li><a href="/categories/linux/">linux<span>1</span></a></li>
		
			<li><a href="/categories/环境配置/">环境配置<span>2</span></a></li>
		
			<li><a href="/categories/跑步/">跑步<span>1</span></a></li>
		
		</ul>
	</div>

		
			
	<div class="widget">
		<h4>标签云</h4>
		<ul class="tag_box inline list-unstyled">		
		
			<li><a href="/tags/Android/">Android<span>2</span></a></li>
		
			<li><a href="/tags/跑步/">跑步<span>1</span></a></li>
		
			<li><a href="/tags/回文串/">回文串<span>1</span></a></li>
		
			<li><a href="/tags/DOODLE/">DOODLE<span>1</span></a></li>
		
			<li><a href="/tags/bug/">bug<span>1</span></a></li>
		
			<li><a href="/tags/c/">c++<span>1</span></a></li>
		
			<li><a href="/tags/python/">python<span>1</span></a></li>
		
			<li><a href="/tags/git/">git<span>1</span></a></li>
		
			<li><a href="/tags/erlang/">erlang<span>2</span></a></li>
		
			<li><a href="/tags/POJ/">POJ<span>2</span></a></li>
		
			<li><a href="/tags/Homebrew/">Homebrew<span>1</span></a></li>
		
			<li><a href="/tags/linux/">linux<span>1</span></a></li>
		
			<li><a href="/tags/Mac/">Mac<span>1</span></a></li>
		
			<li><a href="/tags/环境配置/">环境配置<span>2</span></a></li>
		
			<li><a href="/tags/字符串/">字符串<span>1</span></a></li>
		
			<li><a href="/tags/Manacher/">Manacher<span>1</span></a></li>
		
			<li><a href="/tags/bs4/">bs4<span>1</span></a></li>
		
			<li><a href="/tags/后缀数组/">后缀数组<span>1</span></a></li>
		
			<li><a href="/tags/ACM/">ACM<span>2</span></a></li>
		
		 
		</ul>
	</div>


		
			
<div class="widget">
  <h4>最新文章</h4>
  <ul class="entry list-unstyled">
    
      <li>
        <a href="/unityads添加/" ><i class="fa fa-file-o"></i>android工程添加unityads</a>
      </li>
    
      <li>
        <a href="/homebrew-update-bug/" ><i class="fa fa-file-o"></i>Homebrew 更新Bug</a>
      </li>
    
      <li>
        <a href="/python-bs4/" ><i class="fa fa-file-o"></i>【已解决】python多版本引发的 No moudle...</a>
      </li>
    
      <li>
        <a href="/rebar-erlang/" ><i class="fa fa-file-o"></i>rebar搭建erlang项目</a>
      </li>
    
      <li>
        <a href="/erlang-call-last/" ><i class="fa fa-file-o"></i>关于erlang尾递归</a>
      </li>
    
  </ul>
</div>

		
			
<div class="widget">
	<h4>链接</h4>
	<ul class="blogroll list-unstyled">
	
		<li><i class="fa fa-github"></i><a href="https://github.com/wzpan/freemind/" title="Freemind's Github repository." target="_blank"]);">Freemind</a></li>
	
		<li><i class="fa fa-github"></i><a href="http://www.github.com/bigstupidx" title="My Github account." target="_blank"]);">我的Github</a></li>
	
		<li><i class="fa fa-weibo"></i><a href="http://weibo.com/u/1963313501" title="My Weibo." target="_blank"]);">我的微博</a></li>
	
	</ul>
</div>


		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->

	
	
</div> <!-- row-fluid -->
	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2018 bigstupidx
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



</body>
   </html>
